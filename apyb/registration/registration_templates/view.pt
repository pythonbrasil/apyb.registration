<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="apyb.registration">
<body>

<metal:main fill-slot="content-core">
  <metal:content-core define-macro="content-core">

    <h2 tal:content="context/Title"></h2>
    
    <div id="price">
        <span tal:content="view/fmtPrice" />
    </div>
    
    <div id="attendees">
        <table>
            <thead>
                <tr>
                    <th i18:translate="">Name</th>
                    <th i18:translate="">E-mail</th>
                </tr>
            </thead>
            <tbody>
                <tr tal:repeat="attendee view/attendees">
                    <td tal:content="attendee/Title">Name</td>
                    <td tal:content="attendee/portal_type">E-mail</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="pagseguro" tal:condition="not:view/paid">
        <form 
              action="https://pagseguro.uol.com.br/checkout/checkout.jhtml"
              method="post" target="_new">

            <input type="hidden" name="email_cobranca" value="pagseguro@diaspar.com.br" />
            <input type="hidden" name="encoding" value="UTF-8" />
            <input type="hidden" name="tipo" value="CP" />
            <input type="hidden" name="moeda" value="BRL" />
            <input type="hidden" name="item_id_1" value="1" />
            <input type="hidden" name="item_quant_1" tal:attributes="value python:len(view.attendees());" value="1" />
            <input type="hidden" name="item_descr_1" value="Inscrição PythonBrasil[7]" />

            <input type="hidden" 
                  tal:attributes="value view/price"
                  name="item_valor_1" 
                  value="2500"/>

            <input type="hidden" name="ref_transacao" value="UID"
                   tal:attributes="value context/uid" />

            <input type="hidden" name="cliente_nome" value="Nome"
                   tal:attributes="value context/Title" />

            <input type="hidden" name="cliente_email" value="E-mail"
                   tal:attributes="value context/email" />

            <input type="hidden" name="cliente_cidade" value="Cidade"
                   tal:attributes="value context/city" />

            <input type="hidden" name="cliente_uf" value="UF"
                   tal:attributes="value context/state" />

            <input type="image" src="https://p.simg.uol.com.br/out/pagseguro/i/botoes/carrinhoproprio/btnFinalizaBR.jpg" 
                   name="submit" alt="Pague com PagSeguro - é rápido, grátis e seguro!">
        </form>
    </div>
    
  </metal:content-core>
</metal:main>

</body>
</html>

